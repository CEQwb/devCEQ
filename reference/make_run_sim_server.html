<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="It makes sure that if the inputs to the policy choices did not
  change or the policy choice are identical to the baseline, the simulation
  is not being executed again and again."><title>User-side functional for customizing the run-sim server with own functions — mod_generic_run_sim_server • devCEQ</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="User-side functional for customizing the run-sim server with own functions — mod_generic_run_sim_server"><meta property="og:description" content="It makes sure that if the inputs to the policy choices did not
  change or the policy choice are identical to the baseline, the simulation
  is not being executed again and again."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">devCEQ</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9026</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/microsim-stata.html">Running microsimulations in Stata</a>
    <a class="dropdown-item" href="../articles/r-workflow.html">Setting up a workflow in R</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>User-side functional for customizing the run-sim server with own functions</h1>
      
      <div class="d-none name"><code>make_run_sim_server.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>It makes sure that if the inputs to the policy choices did not
  change or the policy choice are identical to the baseline, the simulation
  is not being executed again and again.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mod_generic_run_sim_server</span><span class="op">(</span></span>
<span>  <span class="va">id</span>,</span>
<span>  run <span class="op">=</span> <span class="fu">reactive</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  presim <span class="op">=</span> <span class="fu">reactive</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  inps <span class="op">=</span> <span class="fu">reactive</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  all_inps <span class="op">=</span> <span class="fu">reactive</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  ceq_progress <span class="op">=</span> <span class="fu">reactive</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  fn_add_missing_inp <span class="op">=</span> <span class="va">add_missing_inp_generic</span>,</span>
<span>  fn_ceq_sim <span class="op">=</span> <span class="va">ceq_sim_generic</span>,</span>
<span>  fn_ceq_pre_postsim <span class="op">=</span> <span class="va">ceq_pre_postsim_generic</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">make_run_sim_server</span><span class="op">(</span></span>
<span>  fn_add_missing_inp <span class="op">=</span> <span class="va">add_missing_inp_generic</span>,</span>
<span>  fn_ceq_sim <span class="op">=</span> <span class="va">ceq_sim_generic</span>,</span>
<span>  fn_ceq_pre_postsim <span class="op">=</span> <span class="va">ceq_pre_postsim_generic</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">add_missing_inp_generic</span><span class="op">(</span><span class="va">inps</span>, <span class="va">all_inps</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ceq_sim_generic</span><span class="op">(</span><span class="va">inp</span>, <span class="va">presim</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ceq_pre_postsim_generic</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>run</dt>
<dd><p>reactive invalidation variable that signals to run the simulation.</p></dd>


<dt>presim</dt>
<dd><p>reactive with pre-simulation data</p></dd>


<dt>inps</dt>
<dd><p>reactive list#'</p></dd>


<dt>all_inps</dt>
<dd><p>reactive with a complete list of inputs that is passed to
`fn_add_missing_inp`.</p></dd>


<dt>ceq_progress</dt>
<dd><p>is reactive tha contains progress function created
with the `fct_make_ceq_progress`</p></dd>


<dt>fn_add_missing_inp</dt>
<dd><p>a function that takes two vectors with pol. ch. in
(`inps` and `all_inps`) and adds missing elements to the first pol. ch.
by name.#'</p></dd>


<dt>fn_ceq_sim</dt>
<dd><p>a function with two inputs: `inps` and `presim`. It must
return a single data frame with the simulation results.</p></dd>


<dt>fn_ceq_pre_postsim</dt>
<dd><p>a function that performs some of the post-simulation
calculations that is relevant to perform at this stage. This, for
example could be aggregating deciles or creating a bulk of default plots.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a `reactiveVal` object that contains a list of data sets with
  simulation results, pre-simulations and post simulation data. It is not
  meant to save space but rather hold all the information in one object.
  Such results object is a list that consists of: `run`, `policy_sim_raw`,
  `run_timestamp` and `policy_sim_agg`. All of it is passed to post-sim
  module.</p>


<p>a function which need to be supplied with arguments of the
  `mod_generic_run_sim_server` function such as `id`, `run`, `presim`,
  `inps`, `all_inps`, `ceq_progress`.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>
    
<ul><li><p><code>mod_generic_run_sim_server()</code>: Generic CEQ runner server that uses
CEQ functions to run the analysis based on the `persim` and `inp` args.</p></li>
<li><p><code>add_missing_inp_generic()</code>: inputs that are missing to the CEQ inputs list.</p></li>
<li><p><code>ceq_sim_generic()</code>: generic function for CEQ simulation</p></li>
<li><p><code>ceq_pre_postsim_generic()</code>: generic function for CEQ pre-postsim</p></li>
</ul></div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Eduard Bukin.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

