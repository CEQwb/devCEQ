<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Contains a instrastrucute for developing R Shiny apps with CEQ microsimulations.">
<title>Development platform for Shiny fiscal microsimulations • devCEQ</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Development platform for Shiny fiscal microsimulations">
<meta property="og:description" content="Contains a instrastrucute for developing R Shiny apps with CEQ microsimulations.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">devCEQ</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9024</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/microsim-stata.html">Running microsimulations in Stata</a>
    <a class="dropdown-item" href="articles/r-workflow.html">Setting up a workflow in R</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="devceq-development-platform-for-shiny-fiscal-microsimulations">
<strong>devCEQ</strong>: Development platform for Shiny fiscal microsimulations<a class="anchor" aria-label="anchor" href="#devceq-development-platform-for-shiny-fiscal-microsimulations"></a>
</h1></div>
<p>This R package contains standardized infrastructure for developing and deploying country-specific fiscal microsimulations as Shiny apps for the Poverty and Equity Policy Lab. The main goal of these apps is to provide users with the visual interface for executing complex microsimulations, and summarizing their results.</p>
<p>There are several apps deployed using the <strong>devCEQ</strong> infrastructure: <a href="https://datanalytics.worldbank.org/senceqapp2018/" class="external-link">Senegal CEQ 2018</a>, <a href="https://datanalytics.worldbank.org/civCEQapp/" class="external-link">Côte d’Ivoire CEQ</a>, <a href="https://datanalytics.worldbank.org/benCEQapp/" class="external-link">Benin CEQ</a>, <a href="https://datanalytics.worldbank.org/idnCEQ2019/" class="external-link">Indonesia CEQ</a>. The <strong>devCEQ</strong> package evolved as a result of developing independent apps for <a href="https://datanalytics.worldbank.org/armCEQapp/" class="external-link">Armenia v1</a> and <a href="https://datanalytics.worldbank.org/armenia-ceq/" class="external-link">Armenia v2</a>, <a href="https://datanalytics.worldbank.org/el-salvador-fiscal-and-equity-tool/" class="external-link">El Salvador</a>, <a href="https://datanalytics.worldbank.org/turkey-tax-simulation-tool/" class="external-link">Turkey</a>, and <a href="https://datanalytics.worldbank.org/romania-sim-tool/" class="external-link">Romania CEQ</a>, where various aspects and requirements to the application were tested at first.</p>
<p>Essentially, <strong>devCEQ</strong> R Package standardizes the data flow within the microsimulation and wraps it in a user interface. With this package, developers can customize the inputs page. Develop and embed any data and simulation methodology into the core of the microsimulation. Finally built a custom visualization either recycling existing modules or developing new ones for better results communication.</p>
<p>An example of such an app is below.</p>
<p><img src="reference/figures/app-overview.gif"></p>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="section level3">
<h3 id="pre-requisites">Pre-requisites<a class="anchor" aria-label="anchor" href="#pre-requisites"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>It is expected that everyone is familiar with Stata, can independently run CEQ-like microsimulations in Stata, and change code to save different stages of the microsimulation analysis.</p></li>
<li><p>Install the latest versions of <a href="https://cran.r-project.org/bin/windows/base/" class="external-link">R</a>, <a href="https://cran.r-project.org/bin/windows/Rtools/rtools43/rtools.html" class="external-link">Rtools</a>, and <a href="https://posit.co/download/rstudio-desktop/" class="external-link">R Studio</a>.</p></li>
<li><p>Install <a href="https://desktop.github.com/" class="external-link">GitHub Desktop</a> and familiarize yourself with the basics of workflow using Git and Github.</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="install-devceq-package">Install <code>devCEQ</code> package<a class="anchor" aria-label="anchor" href="#install-devceq-package"></a>
</h3>
<p>This is very important as this package is the backbone of microsimulation analysis. To install it, run in the console:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"wbEPL/devCEQ"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span>, build_vignettes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="run-an-example-microsimulation-app">Run an example microsimulation app<a class="anchor" aria-label="anchor" href="#run-an-example-microsimulation-app"></a>
</h3>
<p>Now, to launch an exemplary microsimulation app, run the following command in the R console:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://wbepl.github.io/devCEQ/">devCEQ</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/CEQ_run.html">CEQ_run_example</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/app-local-example.gif"></p>
<p>This is an example shiny app that is supplied along with the package <code>devCEQ</code>. You may explore the content of this app and its structure by navigating to the folder, where it is located.</p>
<ul>
<li>As it is located in the package itself, to check the folder, where the app is, type in the R console.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="st">"ceq_example_simple"</span>, package <span class="op">=</span> <span class="st">"devCEQ"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/browseURL.html" class="external-link">browseURL</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>You can also create a local copy of the microsimulation app on your drive to explore it on your own and modify/develop components. To do so, run the code below.</p>
<ul>
<li>Make sure that you provide a proper path to the place, where you want this app to be created.</li>
<li>In the path argument specify a folder, where the app should be as well as the name of the app itself (“./FOLDER/AppName”). The function will create all folders automatically.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://wbepl.github.io/devCEQ/">devCEQ</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/create_microsim.html">create_microsim</a></span><span class="op">(</span><span class="st">"./microsim_simple_example"</span><span class="op">)</span></span></code></pre></div>
<p>Template microsim app has the following structure, which we explore in detail in specific articles on app development.</p>
<pre><code>../microsim_simple_example
├── app.R
├── data-app
│   └── simple-inputs-structure.xlsx
├── DESCRIPTION
├── inst
│   └── app
│       └── info-page.md
├── LICENSE
├── microsim_simple_example.Rproj
├── NAMESPACE
├── R
│   ├── app_config.R
│   ├── fct_simulation.R
│   ├── fct_variables.R
│   ├── mod_gini_povertyresults.R
│   ├── mod_inc_ncp.R
│   ├── mod_results.R
│   └── _disable_autoload.R
└── README.md</code></pre>
</div>
</div>
<div class="section level2">
<h2 id="the-process-of-developing-a-microsimulation-and-its-shiny-app">The process of developing a microsimulation and its SHiny app<a class="anchor" aria-label="anchor" href="#the-process-of-developing-a-microsimulation-and-its-shiny-app"></a>
</h2>
<p>This guide/website is meant to equip users with the key skills they need for developing the user interface of the microsimulation tools in R Shiny. Follow tutorials in the consecutive order under the <a href="./articles/index.html">Articles</a> above. Limited functional documentation is also available in <a href="./reference/index.html">References</a>.</p>
<p>Overall, the process of microsimulation development consists of <strong>two broad stages</strong>:</p>
<ol style="list-style-type: decimal">
<li><p>Developing a microsimulation in Stata (with Excel for data input/output) and polishing the simulation methodology to the dissemination-ready state.</p></li>
<li><p>‘Translating’ the final Stata microsimulation into R, optimizing the analysis, and building a Shiny dashboard around it.</p></li>
</ol>
<p>The first stage is not described here in detail, however, the article <a href="./articles/microsim-stata.Rmd">Running microsimulations in Stata</a> contains some best practices for developing such microsimulations in Stata. Users are advised to follow examples from this article to set up properly the workflow of translating the microsimulation from Stata to R.</p>
<p>The second stage is the focus of this guide. In the second stage, the translation of Stata methodology into R is happening and the Shiny dashboard is created. This translation process has a few logical steps outlined below. Several articles are developed for each step. Please follow these articles to gradually reproduce examples and familiarize yourself with the translation process.</p>
<ol style="list-style-type: decimal">
<li>
<p>Converting simulation methodology from Stata to R.</p>
<ol style="list-style-type: decimal">
<li><a href="./articles/microsim-stata.html">Running microsimulations in Stata</a></li>
<li><a href="./articles/r-workflow.Rmd">Setting up a workflow in R</a></li>
<li>Re-saving pre-simulation data in R</li>
<li>Translating Stata code to R and comparing results between R and Stata</li>
<li>Common R functions/approaches used for translating standard Stata commands</li>
<li>Automating inputs provision in R</li>
</ol>
</li>
<li>
<p>Designing the input page of the dashboard.</p>
<ol style="list-style-type: decimal">
<li>Building inputs structure table and testing its layout in the app</li>
<li>Advanced topics: tabs, input sub-tables, checkboxes, and radio buttons</li>
</ol>
</li>
<li>
<p>Designing the output page (visualization page) of the dashboard</p>
<ol style="list-style-type: decimal">
<li>Defining key variables used in output building</li>
<li>Running exemplary visualization modules</li>
<li>Using Stata inputs to build a moc-up visualization page</li>
<li>Advances topics: customizing output visualization</li>
</ol>
</li>
<li><p>Integrating the input page, output page, and simulation logic in a single dashboard</p></li>
</ol>
<!-- 5.  Troubleshooting and improving the analysis. -->
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing devCEQ</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Eduard Bukin <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Eduard Bukin.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
